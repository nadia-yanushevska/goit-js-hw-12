{"version":3,"file":"commonHelpers.js","sources":["../src/img/error.svg","../src/js/modules/izitoast-options.js","../src/js/modules/izitoast-message.js","../src/js/pixabay-api.js","../src/js/render-functions.js","../src/js/modules/helpers.js","../src/main.js"],"sourcesContent":["export default \"__VITE_ASSET__8479b7dd__\"","import errorIcon from '../../img/error.svg';\n\nexport function getToastOptions(message) {\n    const options = {\n        message,\n        messageSize: '16px',\n        messageLineHeight: '24px',\n        messageColor: '#fff',\n\n        iconUrl: errorIcon,\n\n        backgroundColor: '#EF4040',\n        progressBarColor: '#B51B1B',\n\n        theme: 'dark',\n        position: 'topRight',\n        class: 'message',\n    };\n    return options;\n}\n","// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { getToastOptions } from './izitoast-options.js';\n\nexport function showMessage(message) {\n    console.log(message);\n    iziToast.show(getToastOptions(message));\n}\n","import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com';\nexport const PER_PAGE = 15;\nconst params = {\n    key: '42730262-d44e8a42848c88033a006d73c',\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: PER_PAGE,\n};\n\nexport function getImages(q = '', page = 1) {\n    params.q = q;\n    params.page = +page || 1;\n\n    return axios.get('/api/', { params });\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n});\n\nexport function renderGallery(gallery, images) {\n    gallery.insertAdjacentHTML('beforeend', galleryTemplate(images));\n    lightbox.refresh();\n}\n\nfunction galleryTemplate(images) {\n    return images.map(imageTemplate).join('\\n\\n');\n}\n\nfunction imageTemplate(img) {\n    const {\n        webformatURL: previewURL,\n        largeImageURL,\n        previewHeight,\n        previewWidth,\n        likes,\n        views,\n        comments,\n        downloads,\n        tags: alt,\n    } = img;\n    return `<li class=\"gallery-item\">\n                <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                    <img\n                        class=\"gallery-image\"\n                        src=\"${previewURL}\"\n                        alt=\"${alt}\"\n                        width=\"${previewWidth}\"\n                        height=\"${previewHeight}\"\n                    />\n                </a>\n                <ul class=\"desc-list\">\n                        <li class=\"desc-li\">\n                            <h3 class=\"bold\">Likes</h3>\n                            <p>${likes}</p>\n                        </li>\n                        <li class=\"desc-li\">\n                            <h3 class=\"bold\">Views</h3>\n                            <p>${views}</p>\n                        </li>\n                        <li class=\"desc-li\">\n                            <h3 class=\"bold\">Comments</h3>\n                            <p>${comments}</p>\n                        </li>\n                        <li class=\"desc-li\">\n                            <h3 class=\"bold\">Downloads</h3>\n                            <p>${downloads}</p>\n                        </li>\n                    </ul>\n            </li>`;\n}\n","export function formatSearchValue(value) {\n    const words = value.split(' ');\n    return words.filter(word => word).join('+');\n}\n\nexport function showElement(elem) {\n    elem.classList.remove('is-hidden');\n}\nexport function hideElement(elem) {\n    elem.classList.add('is-hidden');\n}\n","import './css/styles.css';\nimport { showMessage } from './js/modules/izitoast-message.js';\nimport { getImages, PER_PAGE } from './js/pixabay-api.js';\nimport { renderGallery } from './js/render-functions.js';\nimport {\n    formatSearchValue,\n    showElement,\n    hideElement,\n} from './js/modules/helpers.js';\n\nconst noImgMessage = `Sorry, there are no images matching your&nbsp;search query. Please, try again!`;\nconst limitMessage = `\"We're sorry, but you've reached the end of search results.\"`;\nlet searchValue, previousSearchValue;\nlet pageNum = 1;\n\nconst galleryContainer = document.querySelector('.gallery');\nconst searchForm = document.querySelector('[js-form]');\nconst loadBtn = document.querySelector('[js-load-btn]');\nconst loader = document.querySelector('[js-loader]');\n\nsearchForm.addEventListener('submit', onSearch);\nloadBtn.addEventListener('click', onLoadBtn);\ndocument.addEventListener('wheel', onGalleryScroll);\n\nfunction onSearch(e) {\n    e.preventDefault();\n\n    showElement(loader);\n    galleryContainer.innerHTML = '';\n\n    searchValue = formatSearchValue(e.target.elements['search-name'].value);\n    if (previousSearchValue !== searchValue) {\n        pageNum = 1;\n    } else pageNum++;\n\n    findImages(searchValue, pageNum);\n    previousSearchValue = searchValue;\n\n    e.target.reset();\n}\n\nasync function onLoadBtn() {\n    showElement(loader);\n\n    await findImages(searchValue, ++pageNum);\n\n    onGalleryScroll({ deltaY: 10, preventDefault() {} });\n}\n\nasync function findImages(searchValue, pageNum = 1) {\n    hideElement(loadBtn);\n\n    try {\n        const res = await getImages(searchValue, pageNum);\n        const data = res.data;\n\n        const imageArray = [...data.hits];\n        const totalHits = data.totalHits;\n\n        if (imageArray.length === 0) {\n            showMessage(noImgMessage);\n        } else {\n            renderGallery(galleryContainer, imageArray);\n\n            totalHits > pageNum * PER_PAGE\n                ? showElement(loadBtn)\n                : showMessage(limitMessage);\n        }\n    } catch (err) {\n        showMessage(err);\n    } finally {\n        hideElement(loader);\n    }\n}\n\nfunction onGalleryScroll(e) {\n    e.preventDefault();\n    const multiplier = e.deltaY > 0 ? 2 : -2;\n\n    const card = galleryContainer.querySelector('.gallery-item');\n    const cardHeight = Number.parseInt(card.getBoundingClientRect().height);\n\n    const options = {\n        top: multiplier * cardHeight,\n        behavior: 'smooth',\n    };\n\n    window.scrollBy(options);\n}\n"],"names":["errorIcon","getToastOptions","message","showMessage","iziToast","axios","PER_PAGE","params","getImages","q","page","lightbox","SimpleLightbox","renderGallery","gallery","images","galleryTemplate","imageTemplate","img","previewURL","largeImageURL","previewHeight","previewWidth","likes","views","comments","downloads","alt","formatSearchValue","value","word","showElement","elem","hideElement","noImgMessage","limitMessage","searchValue","previousSearchValue","pageNum","galleryContainer","searchForm","loadBtn","loader","onSearch","onLoadBtn","onGalleryScroll","findImages","data","imageArray","totalHits","err","multiplier","card","cardHeight","options"],"mappings":"owBAAA,MAAeA,EAAA,2CCER,SAASC,EAAgBC,EAAS,CAgBrC,MAfgB,CACZ,QAAAA,EACA,YAAa,OACb,kBAAmB,OACnB,aAAc,OAEd,QAASF,EAET,gBAAiB,UACjB,iBAAkB,UAElB,MAAO,OACP,SAAU,WACV,MAAO,SACf,CAEA,CCZO,SAASG,EAAYD,EAAS,CACjC,QAAQ,IAAIA,CAAO,EACnBE,EAAS,KAAKH,EAAgBC,CAAO,CAAC,CAC1C,CCRAG,EAAM,SAAS,QAAU,sBAClB,MAAMC,EAAW,GAClBC,EAAS,CACX,IAAK,qCACL,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAUD,CACd,EAEO,SAASE,EAAUC,EAAI,GAAIC,EAAO,EAAG,CACxC,OAAAH,EAAO,EAAIE,EACXF,EAAO,KAAO,CAACG,GAAQ,EAEhBL,EAAM,IAAI,QAAS,CAAE,OAAAE,CAAQ,CAAA,CACxC,CCdA,MAAMI,EAAW,IAAIC,EAAe,aAAc,CAC9C,aAAc,MACd,aAAc,GAClB,CAAC,EAEM,SAASC,EAAcC,EAASC,EAAQ,CAC3CD,EAAQ,mBAAmB,YAAaE,EAAgBD,CAAM,CAAC,EAC/DJ,EAAS,QAAO,CACpB,CAEA,SAASK,EAAgBD,EAAQ,CAC7B,OAAOA,EAAO,IAAIE,CAAa,EAAE,KAAK;AAAA;AAAA,CAAM,CAChD,CAEA,SAASA,EAAcC,EAAK,CACxB,KAAM,CACF,aAAcC,EACd,cAAAC,EACA,cAAAC,EACA,aAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,EACA,KAAMC,CACT,EAAGT,EACJ,MAAO;AAAA,gDACqCE,CAAa;AAAA;AAAA;AAAA,+BAG9BD,CAAU;AAAA,+BACVQ,CAAG;AAAA,iCACDL,CAAY;AAAA,kCACXD,CAAa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCAMdE,CAAK;AAAA;AAAA;AAAA;AAAA,iCAILC,CAAK;AAAA;AAAA;AAAA;AAAA,iCAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,iCAIRC,CAAS;AAAA;AAAA;AAAA,kBAI1C,CC1DO,SAASE,EAAkBC,EAAO,CAErC,OADcA,EAAM,MAAM,GAAG,EAChB,OAAOC,GAAQA,CAAI,EAAE,KAAK,GAAG,CAC9C,CAEO,SAASC,EAAYC,EAAM,CAC9BA,EAAK,UAAU,OAAO,WAAW,CACrC,CACO,SAASC,EAAYD,EAAM,CAC9BA,EAAK,UAAU,IAAI,WAAW,CAClC,CCAA,MAAME,EAAe,iFACfC,EAAe,+DACrB,IAAIC,EAAaC,EACbC,EAAU,EAEd,MAAMC,EAAmB,SAAS,cAAc,UAAU,EACpDC,EAAa,SAAS,cAAc,WAAW,EAC/CC,EAAU,SAAS,cAAc,eAAe,EAChDC,EAAS,SAAS,cAAc,aAAa,EAEnDF,EAAW,iBAAiB,SAAUG,CAAQ,EAC9CF,EAAQ,iBAAiB,QAASG,CAAS,EAC3C,SAAS,iBAAiB,QAASC,CAAe,EAElD,SAASF,EAAS,EAAG,CACjB,EAAE,eAAc,EAEhBZ,EAAYW,CAAM,EAClBH,EAAiB,UAAY,GAE7BH,EAAcR,EAAkB,EAAE,OAAO,SAAS,aAAa,EAAE,KAAK,EAClES,IAAwBD,EACxBE,EAAU,EACPA,IAEPQ,EAAWV,EAAaE,CAAO,EAC/BD,EAAsBD,EAEtB,EAAE,OAAO,OACb,CAEA,eAAeQ,GAAY,CACvBb,EAAYW,CAAM,EAElB,MAAMI,EAAWV,EAAa,EAAEE,CAAO,EAEvCO,EAAgB,CAAE,OAAQ,GAAI,gBAAiB,CAAA,CAAI,CAAA,CACvD,CAEA,eAAeC,EAAWV,EAAaE,EAAU,EAAG,CAChDL,EAAYQ,CAAO,EAEnB,GAAI,CAEA,MAAMM,GADM,MAAMvC,EAAU4B,EAAaE,CAAO,GAC/B,KAEXU,EAAa,CAAC,GAAGD,EAAK,IAAI,EAC1BE,EAAYF,EAAK,UAEnBC,EAAW,SAAW,EACtB7C,EAAY+B,CAAY,GAExBrB,EAAc0B,EAAkBS,CAAU,EAE1CC,EAAYX,EAAUhC,EAChByB,EAAYU,CAAO,EACnBtC,EAAYgC,CAAY,EAErC,OAAQe,EAAK,CACV/C,EAAY+C,CAAG,CACvB,QAAc,CACNjB,EAAYS,CAAM,CACrB,CACL,CAEA,SAASG,EAAgB,EAAG,CACxB,EAAE,eAAc,EAChB,MAAMM,EAAa,EAAE,OAAS,EAAI,EAAI,GAEhCC,EAAOb,EAAiB,cAAc,eAAe,EACrDc,EAAa,OAAO,SAASD,EAAK,sBAAqB,EAAG,MAAM,EAEhEE,EAAU,CACZ,IAAKH,EAAaE,EAClB,SAAU,QAClB,EAEI,OAAO,SAASC,CAAO,CAC3B"}